set -g allow-passthrough all
set -g mouse on
set-option -ga terminal-overrides ",xterm-256color:Tc"

set -g base-index 1
setw -g pane-base-index 1
set-option -g status-position bottom
set-option -g status-justify centre
set-option -g automatic-rename on
set-option -g renumber-windows on

unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

bind - split-window -v -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind n new-window -c "#{pane_current_path}"
bind r source-file ~/.tmux.conf

bind c display-popup -E -w90% -h90% -d "#{pane_current_path}" 'opencode'
bind f display-popup -E "sh -c 'tmux capture-pane -pS -10000 | pathpicker | fzf | xargs -r -I{} tmux new-window \"vim {}\"'"
bind u display-popup -E "sh -c 'tmux capture-pane -pS -10000 | grep -Eo \"https?://[^ ]+\" | sort -u | fzf | xargs -r xdg-open'"

bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# bind -n M-S-h swap-pane -L
# bind -n M-S-j swap-pane -D
# bind -n M-S-k swap-pane -U
# bind -n M-S-l swap-pane -R

bind 1 select-window -t 1
bind 2 select-window -t 2
bind 3 select-window -t 3
bind 4 select-window -t 4
bind 5 select-window -t 5
bind 6 select-window -t 6
bind 7 select-window -t 7
bind 8 select-window -t 8
bind 9 select-window -t 9

set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"

set -g status-keys vi
unbind-key -T copy-mode-vi Enter
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'

set -g @plugin "MunifTanjim/tmux-mode-indicator"
set -g @plugin "soyuka/tmux-current-pane-hostname"
set-option -g status-left "#[bg=#50fa7b,fg=#282a36] #S "
set-option -g status-right '#[fg=#282a36,bg=#f1fa8c]#{?#{pane_ssh_connected}, #{username}@#{hostname} ,}#{tmux_mode_indicator}'
set-option -g status-style "bg=#44475a,fg=#f8f8f2"
set-option -g window-status-format "#[fg=#f8f8f2]#[bg=#44475a] #I #W#{?window_flags,#[fg=#6272a4]#{window_flags},}"
set-option -g window-status-current-format "#[fg=#f8f8f2,bg=#6272a4] #I #W#{?window_flags,#[fg=#bd93f9]#{window_flags},} "

set -g @plugin "alexwforsythe/tmux-which-key"

run "~/.tmux/plugins/tpm/tpm"
